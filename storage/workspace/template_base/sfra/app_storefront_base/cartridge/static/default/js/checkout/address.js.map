{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../storefront-reference-architecture/cartridges/app_storefront_base/cartridge/client/default/js/checkout/address.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFa;;AAEb;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA","file":"default/js/checkout/address.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"../storefront-reference-architecture/cartridges/app_storefront_base/cartridge/client/default/js/checkout/address.js\");\n","'use strict';\n\n/**\n * Populate the Billing Address Summary View\n * @param {string} parentSelector - the top level DOM selector for a unique address summary\n * @param {Object} address - the address data\n */\nfunction populateAddressSummary(parentSelector, address) {\n    $.each(address, function (attr) {\n        var val = address[attr];\n        $('.' + attr, parentSelector).text(val || '');\n    });\n}\n\n/**\n * returns a formed <option /> element\n * @param {Object} shipping - the shipping object (shipment model)\n * @param {boolean} selected - current shipping is selected (for PLI)\n * @param {order} order - the Order model\n * @param {Object} [options] - options\n * @returns {Object} - the jQuery / DOMElement\n */\nfunction optionValueForAddress(shipping, selected, order, options) {\n    var safeOptions = options || {};\n    var isBilling = safeOptions.type && safeOptions.type === 'billing';\n    var className = safeOptions.className || '';\n    var isSelected = selected;\n    var isNew = !shipping;\n    if (typeof shipping === 'string') {\n        return $('<option class=\"' + className + '\" disabled>' + shipping + '</option>');\n    }\n    var safeShipping = shipping || {};\n    var shippingAddress = safeShipping.shippingAddress || {};\n\n    if (isBilling && isNew && !order.billing.matchingAddressId) {\n        shippingAddress = order.billing.billingAddress.address || {};\n        isNew = false;\n        isSelected = true;\n        safeShipping.UUID = 'manual-entry';\n    }\n\n    var uuid = safeShipping.UUID ? safeShipping.UUID : 'new';\n    var optionEl = $('<option class=\"' + className + '\" />');\n    optionEl.val(uuid);\n\n    var title;\n\n    if (isNew) {\n        title = order.resources.addNewAddress;\n    } else {\n        title = [];\n        if (shippingAddress.firstName) {\n            title.push(shippingAddress.firstName);\n        }\n        if (shippingAddress.lastName) {\n            title.push(shippingAddress.lastName);\n        }\n        if (shippingAddress.address1) {\n            title.push(shippingAddress.address1);\n        }\n        if (shippingAddress.address2) {\n            title.push(shippingAddress.address2);\n        }\n        if (shippingAddress.city) {\n            if (shippingAddress.state) {\n                title.push(shippingAddress.city + ',');\n            } else {\n                title.push(shippingAddress.city);\n            }\n        }\n        if (shippingAddress.stateCode) {\n            title.push(shippingAddress.stateCode);\n        }\n        if (shippingAddress.postalCode) {\n            title.push(shippingAddress.postalCode);\n        }\n        if (!isBilling && safeShipping.selectedShippingMethod) {\n            title.push('-');\n            title.push(safeShipping.selectedShippingMethod.displayName);\n        }\n\n        if (title.length > 2) {\n            title = title.join(' ');\n        } else {\n            title = order.resources.newAddress;\n        }\n    }\n    optionEl.text(title);\n\n    var keyMap = {\n        'data-first-name': 'firstName',\n        'data-last-name': 'lastName',\n        'data-address1': 'address1',\n        'data-address2': 'address2',\n        'data-city': 'city',\n        'data-state-code': 'stateCode',\n        'data-postal-code': 'postalCode',\n        'data-country-code': 'countryCode',\n        'data-phone': 'phone'\n    };\n    $.each(keyMap, function (key) {\n        var mappedKey = keyMap[key];\n        var mappedValue = shippingAddress[mappedKey];\n        // In case of country code\n        if (mappedValue && typeof mappedValue === 'object') {\n            mappedValue = mappedValue.value;\n        }\n\n        optionEl.attr(key, mappedValue || '');\n    });\n\n    var giftObj = {\n        'data-is-gift': 'isGift',\n        'data-gift-message': 'giftMessage'\n    };\n\n    $.each(giftObj, function (key) {\n        var mappedKey = giftObj[key];\n        var mappedValue = safeShipping[mappedKey];\n        optionEl.attr(key, mappedValue || '');\n    });\n\n    if (isSelected) {\n        optionEl.attr('selected', true);\n    }\n\n    return optionEl;\n}\n\n/**\n * returns address properties from a UI form\n * @param {Form} form - the Form element\n * @returns {Object} - a JSON object with all values\n */\nfunction getAddressFieldsFromUI(form) {\n    var address = {\n        firstName: $('input[name$=_firstName]', form).val(),\n        lastName: $('input[name$=_lastName]', form).val(),\n        address1: $('input[name$=_address1]', form).val(),\n        address2: $('input[name$=_address2]', form).val(),\n        city: $('input[name$=_city]', form).val(),\n        postalCode: $('input[name$=_postalCode]', form).val(),\n        stateCode: $('select[name$=_stateCode],input[name$=_stateCode]', form).val(),\n        countryCode: $('select[name$=_country]', form).val(),\n        phone: $('input[name$=_phone]', form).val()\n    };\n    return address;\n}\n\nmodule.exports = {\n    methods: {\n        populateAddressSummary: populateAddressSummary,\n        optionValueForAddress: optionValueForAddress,\n        getAddressFieldsFromUI: getAddressFieldsFromUI\n    },\n\n    showDetails: function () {\n        $('.btn-show-details').on('click', function () {\n            var form = $(this).closest('form');\n\n            form.attr('data-address-mode', 'details');\n            form.find('.multi-ship-address-actions').removeClass('d-none');\n            form.find('.multi-ship-action-buttons .col-12.btn-save-multi-ship').addClass('d-none');\n        });\n    },\n\n    addNewAddress: function () {\n        $('.btn-add-new').on('click', function () {\n            var $el = $(this);\n            if ($el.parents('#dwfrm_billing').length > 0) {\n                // Handle billing address case\n                $('body').trigger('checkout:clearBillingForm');\n                var $option = $($el.parents('form').find('.addressSelector option')[0]);\n                $option.attr('value', 'new');\n                var $newTitle = $('#dwfrm_billing input[name=localizedNewAddressTitle]').val();\n                $option.text($newTitle);\n                $option.prop('selected', 'selected');\n                $el.parents('[data-address-mode]').attr('data-address-mode', 'new');\n            } else {\n                // Handle shipping address case\n                var $newEl = $el.parents('form').find('.addressSelector option[value=new]');\n                $newEl.prop('selected', 'selected');\n                $newEl.parent().trigger('change');\n            }\n        });\n    }\n};\n"],"sourceRoot":""}